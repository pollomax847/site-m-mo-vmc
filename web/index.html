<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="description" content="M√©mo technique VMC - Documentation technique pour les diff√©rents types d'installations VMC">
  <meta name="theme-color" content="#3498db">
  <meta name="google-adsense-account" content="ca-pub-6664265722735791">
  
  <!-- Correctifs DOM critiques - doivent √™tre charg√©s en tout premier -->
  <script src="dom-fix-patch.js"></script>
  
  <!-- Reste des scripts de correction -->
  <script src="error-handler.js"></script>
  <script src="dom-fix.js"></script>
  <script src="dev-utils.js"></script>
  <script src="cleanup.js"></script>
  
  <title>M√©mo Technique VMC</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="auto-update.css">
  <link rel="stylesheet" href="styles/mobile-fixes.css">
  <link rel="stylesheet" href="css/unified-styles.css">
  <link rel="stylesheet" href="css/firefox-fixes.css">
  <link rel="stylesheet" href="css/windows-module.css">
  <link rel="stylesheet" href="css/error-handling.css">
  
  <!-- Ic√¥nes -->
  <link rel="icon" href="logo.png" type="image/png">
  <link rel="apple-touch-icon" href="logo-192.png">
  <link rel="manifest" href="manifest.json">
  
  <!-- Style critique pour menu mobile -->
  <style>
    .menu-button {
      position: fixed !important;
      top: 15px !important;
      left: 15px !important;
      width: 50px !important;
      height: 50px !important;
      background-color: #2196F3 !important;
      color: white !important;
      border-radius: 50% !important;
      z-index: 9999 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 30px !important;
      cursor: pointer !important;
      border: none !important;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3) !important;
    }
    
    .side-menu {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 85% !important;
      max-width: 300px !important;
      height: 100% !important;
      background-color: white !important;
      z-index: 998 !important;
      transform: translateX(-100%) !important;
      transition: transform 0.3s ease !important;
      overflow-y: auto !important;
      padding-top: 60px !important;
      box-shadow: 2px 0 10px rgba(0,0,0,0.3) !important;
    }
    
    .side-menu.open {
      transform: translateX(0) !important;
    }
    
    .menu-overlay {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      background-color: rgba(0,0,0,0.5) !important;
      z-index: 997 !important;
      display: none !important;
    }
  </style>
  
  <!-- Fix pour CSS probl√©matiques -->
  <style>
    /* Correctifs pour les propri√©t√©s CSS probl√©matiques */
    * {
      -webkit-font-smoothing: auto !important; 
      -moz-osx-font-smoothing: auto !important;
      -webkit-text-size-adjust: none !important;
      text-size-adjust: none !important;
    }
  </style>
</head>
<body>
  <!-- Menu mobile -->
  <button class="menu-button" id="menuButton" aria-label="Menu principal">
    <span class="menu-icon">‚ò∞</span>
  </button>
  <div class="side-menu" id="sideMenu" aria-hidden="true">
    <div class="side-menu-header">
      <h3>üìã Menu VMC</h3>
      <p class="menu-subtitle">Navigation technique</p>
    </div>
    <nav>
      <ul>
        <li><a href="#" data-section="accueil"><span class="icon">üè†</span>Accueil</a></li>
        <li><a href="#" data-section="verification-debit"><span class="icon">üìä</span>V√©rification des D√©bits</a></li>
        <li><a href="#" data-section="faq"><span class="icon">‚ùì</span>FAQ VMC</a></li>
        <li><a href="#" data-section="methodologie"><span class="icon">üîß</span>M√©thodologie d'Installation</a></li>
        <li><a href="#" data-section="depannage"><span class="icon">üõ†Ô∏è</span>Guide de D√©pannage</a></li>
        <li><a href="#" data-section="dsc-constructeurs"><span class="icon">üè≠</span>DSC par constructeur</a></li>
        <li><a href="#" data-section="info"><span class="icon">‚ÑπÔ∏è</span>Informations Techniques</a></li>
        <li><a href="#" data-section="cgu"><span class="icon">üìú</span>Conditions d'utilisation</a></li>
      </ul>
    </nav>
  </div>
  
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <header>
    <div class="logo-container">
      <img src="logo.png" alt="M√©mo VMC Logo" id="logo">
      <div class="logo-glow"></div>
    </div>
    <h1>M√©mo Technique - VMC par type d'installation</h1>
    <p class="header-subtitle">Documentation technique compl√®te pour les installations VMC</p>
    <div class="search-container">
      <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Rechercher dans la documentation...">
        <button id="searchButton">
          <span class="search-icon">üîç</span>
          Rechercher
        </button>
      </div>
    </div>
    <div class="header-stats">
      <div class="stat-item">
        <span class="stat-number">50+</span>
        <span class="stat-label">Guides</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">100+</span>
        <span class="stat-label">Constructeurs</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">24/7</span>
        <span class="stat-label">Disponible</span>
      </div>
    </div>
  </header>
  
  <div id="content">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <h2>Chargement du contenu VMC</h2>
        <p>Pr√©paration de la documentation technique...</p>
        <div class="loading-progress">
          <div class="progress-bar"></div>
        </div>
      </div>
    </div>

    <!-- Welcome Section -->
    <div class="welcome-section">
      <div class="welcome-card">
        <h2>üéØ Bienvenue sur le M√©mo Technique VMC</h2>
        <p>D√©couvrez notre documentation compl√®te pour ma√Ætriser l'installation et la maintenance des syst√®mes de ventilation m√©canique contr√¥l√©e.</p>
        <div class="welcome-features">
          <div class="feature-item">
            <span class="feature-icon">üìö</span>
            <span>Guides d√©taill√©s</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üîß</span>
            <span>Outils pratiques</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üìä</span>
            <span>Calculs techniques</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Ajouter un conteneur d√©di√© aux annonces en haut -->
    <div class="ad-container top-ad" id="top-ad">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-6664265722735791"
           data-ad-slot="votre-ad-slot-id"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
    </div>

    <div class="section-container">
      <h2 class="section-title">Chargement du contenu...</h2>
      <div class="loading-placeholder">
        <div class="placeholder-card"></div>
        <div class="placeholder-card"></div>
        <div class="placeholder-card"></div>
      </div>
    </div>

    <!-- Ajouter un conteneur d√©di√© aux annonces en bas -->
    <div class="ad-container bottom-ad" id="bottom-ad">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-6664265722735791"
           data-ad-slot="votre-ad-slot-id"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
    </div>
  </div>
  
  <div id="offline-status" class="hidden">
    Mode hors ligne activ√©
  </div>
  
  <!-- Script initial pour √©viter des erreurs -->
  <script>
    // Garantir l'existence de l'espace de noms VMC
    window.vmcContent = window.vmcContent || {};
    
    // Loading screen management
    function hideLoadingScreen() {
      const loadingScreen = document.getElementById('loading-screen');
      if (loadingScreen) {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 500);
      }
    }

    function showLoadingScreen() {
      const loadingScreen = document.getElementById('loading-screen');
      if (loadingScreen) {
        loadingScreen.style.display = 'flex';
        loadingScreen.style.opacity = '1';
      }
    }

    // Initialize loading screen
    document.addEventListener('DOMContentLoaded', function() {
      // Show loading screen initially
      showLoadingScreen();
      
      // Hide loading after 2 seconds (simulate content loading)
      setTimeout(hideLoadingScreen, 2000);
    });

    // Initialisation du menu mobile avec animations am√©lior√©es
    document.addEventListener('DOMContentLoaded', function() {
      const menuButton = document.getElementById('menuButton');
      const sideMenu = document.getElementById('sideMenu');
      const menuOverlay = document.getElementById('menuOverlay');
      
      if (menuButton && sideMenu && menuOverlay) {
        menuButton.addEventListener('click', function() {
          const isOpen = sideMenu.classList.contains('open');
          
          if (isOpen) {
            // Fermer le menu
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('show');
            menuButton.innerHTML = '<span class="menu-icon">‚ò∞</span>';
          } else {
            // Ouvrir le menu
            sideMenu.classList.add('open');
            menuOverlay.classList.add('show');
            menuButton.innerHTML = '<span class="menu-icon">‚úï</span>';
          }
        });
        
        menuOverlay.addEventListener('click', function() {
          sideMenu.classList.remove('open');
          menuOverlay.classList.remove('show');
          menuButton.innerHTML = '<span class="menu-icon">‚ò∞</span>';
        });
        
        // Fermer le menu avec la touche √âchap
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && sideMenu.classList.contains('open')) {
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('show');
            menuButton.innerHTML = '<span class="menu-icon">‚ò∞</span>';
          }
        });
        
        // Configurer les liens du menu avec animations
        const menuLinks = sideMenu.querySelectorAll('nav a');
        menuLinks.forEach((link, index) => {
          link.style.animationDelay = `${index * 0.1}s`;
          
          link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const section = this.getAttribute('data-section');
            
            // Animation de clic
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
              this.style.transform = 'scale(1)';
            }, 150);
            
            // Fermer le menu
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('show');
            menuButton.innerHTML = '<span class="menu-icon">‚ò∞</span>';
            
            if (typeof loadContent === 'function') {
              loadContent(section);
            } else {
              console.log('Chargement de section:', section);
              showLoadingScreen();
              
              // Simuler le chargement
              setTimeout(() => {
                hideLoadingScreen();
                const event = new CustomEvent('sectionRequest', { 
                  detail: { section: section } 
                });
                document.dispatchEvent(event);
              }, 1000);
            }
          });
        });
      }
    });

    // Animation des statistiques du header
    document.addEventListener('DOMContentLoaded', function() {
      const statNumbers = document.querySelectorAll('.stat-number');
      
      statNumbers.forEach((stat, index) => {
        stat.style.animationDelay = `${index * 0.2 + 1}s`;
        stat.classList.add('animate-number');
      });
    });

    // Animation au scroll
    function animateOnScroll() {
      const elements = document.querySelectorAll('.card, .section-container, .ad-container');
      
      elements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementBottom = element.getBoundingClientRect().bottom;
        
        if (elementTop < window.innerHeight - 100 && elementBottom > 0) {
          element.classList.add('animate-in');
        }
      });
    }

    window.addEventListener('scroll', animateOnScroll);
    document.addEventListener('DOMContentLoaded', animateOnScroll);
  </script>
  
  <!-- Scripts principaux, un seul exemplaire -->
  <script src="script.js"></script>
  <script src="animations.js"></script>
  <script src="verification-debit.js"></script>
  <script src="cgu-module.js"></script>
  <script src="aerations-help.js"></script>
  <script src="dsc-constructeurs.js"></script>
  <script src="fix-mobile-display.js"></script>
  <script src="sw-register.js"></script>
  
  <!-- Script AdSense avec attributs de s√©curit√© -->
  <script>
    (function() {
      // Attendre que la page soit totalement charg√©e
      window.addEventListener('load', function() {
        // Ne pas charger les annonces en mode d√©veloppement
        if (window.location.hostname.includes('localhost') || 
            window.location.hostname.includes('192.168.')) {
          console.log('Mode d√©veloppement : AdSense d√©sactiv√©');
          return;
        }

        // Charger le script AdSense
        const script = document.createElement('script');
        script.async = true;
        script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6664265722735791';
        script.crossOrigin = 'anonymous';
        
        script.onload = function() {
          // Initialiser toutes les annonces une fois le script charg√©
          const ads = document.querySelectorAll('.adsbygoogle');
          ads.forEach(ad => {
            try {
              (adsbygoogle = window.adsbygoogle || []).push({});
            } catch(e) {
              console.error('Erreur initialisation AdSense:', e);
            }
          });
        };

        document.head.appendChild(script);
      });
    })();
  </script>
</body>
</html>